# ðŸ†• STATUS ATUALIZADO 08/07/2025

- Todas as telas e regras descritas neste documento estÃ£o **implementadas e validadas** no app.
- Fluxo principal, regras de negÃ³cio, filtros, destaques visuais, impressÃ£o e gerenciamento de mesas estÃ£o **100% funcionais** conforme especificaÃ§Ã£o.
- Ãšltima validaÃ§Ã£o: 08/07/2025

---

Atue como expert em programaÃ§Ã£o e design, desenvolvedor android senior. AnÃ¡lise as novas orientaÃ§Ãµes abaixo, compare com nosso projeto atual. Pense profundamente e faÃ§a as adaptaÃ§Ãµes . Quero que todas as alteraÃ§Ãµes nÃ£o prejudique o progresso jÃ¡ obtido no projeto e que ao final consigamos  gerar o apk para visualizaÃ§Ã£o do progresso.

Fluxo principal

Login -Rotas - Clientes da Rota - Detalhes do Cliente - Acerto- ImpressÃ£o

As telas abaixo estÃ£o numeradas na ordem do fluxo principal das telas, sendo que os itens com numeraÃ§Ã£o tipo: 3.1 sÃ£o consideradas tela de suporte para as telas principais.

1- Tela "Rotas"

### Card 1: Filtro de Acertos (Horizontal)

- **Filtro Principal:** Um card com rolagem horizontal para selecionar o ciclo de acerto (Ex: "1Âº Acerto", "2Âº Acerto", etc.).
- **LÃ³gica de GeraÃ§Ã£o:**
  - Os acertos sÃ£o **por rota**. Ex: "1Âº Acerto da Rota Zona Sul", "1Âº Acerto da Rota Zona Norte".
  - Um novo ciclo de acerto Ã© criado para uma rota especÃ­fica ao se clicar em "Iniciar Rota" na tela "Clientes da Rota".
  - A numeraÃ§Ã£o Ã© anual e por rota (o primeiro "Iniciar Rota" do ano para a Rota Sul cria o "1Âº Acerto", o segundo cria o "2Âº Acerto", e assim por diante atÃ© 12).
- **Estado PadrÃ£o:** Ao abrir a tela, o filtro deve mostrar o primeiro acerto do ano ("1Âº Acerto") como padrÃ£o.

### Card 2: Listagem e Consolidados das Rotas (Vertical)

- **ConteÃºdo DinÃ¢mico:** A lista de rotas abaixo Ã© **filtrada** pelo ciclo de acerto selecionado no Card 1.
- **Estrutura do Card de Rota:** Para cada rota, um card deve exibir o consolidado daquele perÃ­odo de acerto.
  - **Exemplo de Card:**
    - **TÃ­tulo:** 1Âº Acerto Rota Zona Sul
    - **Status:** Em Andamento / Finalizada
    - **Faturamento:** R$ 12.000
    - **Clientes:** 80 ativos
    - **Mesas:** 96
    - **DÃ©bitos:** R$ 8.360 (soma dos dÃ©bitos pendentes da rota no perÃ­odo)
    - **PendÃªncias:** 40 (clientes com dÃ©bito > R$400 OU que nÃ£o acertam hÃ¡ mais de 4 meses)
- **Visibilidade:** UsuÃ¡rios comuns (representantes) veem apenas as rotas pelas quais sÃ£o responsÃ¡veis.

2-Tela "Clientes Rota"

### Card 1: InformaÃ§Ãµes da Rota e AÃ§Ãµes

- **ConteÃºdo:** Nome da rota, campo de pesquisa por nome do cliente.
- **Filtros RÃ¡pidos:**
  - Quantidade de clientes ativos e total de mesas na rota.
  - Caixa de filtro: "Clientes com dÃ©bito alto (> R$300)".
  - Caixa de filtro: "Clientes sem acerto hÃ¡ mais de 4 meses".
- **BotÃµes de AÃ§Ã£o:**
  - **"Iniciar Rota":** Permite que os acertos para esta rota sejam feitos. Cria o prÃ³ximo ciclo de acerto para a rota (Ex: "3Âº Acerto").
  - **"Finalizar Rota":** Finaliza o ciclo de acerto atual, impedindo novos acertos atÃ© que "Iniciar Rota" seja clicado novamente.
  - **"Novo Cliente":** Leva para a tela "Cadastro de Clientes".

### Card 2: Listagem de Clientes

- **ConteÃºdo do Sub-card:** Nome do cliente, endereÃ§o, valor do dÃ©bito, tempo desde o Ãºltimo acerto.
- **Destaque Visual:**
  - **Linha Vermelha:** DÃ©bito > R$300.
  - **Linha Amarela:** NÃ£o acerta hÃ¡ mais de 4 meses.
  - **Linha Verde:** Demais casos.
- **Regra de ExibiÃ§Ã£o:** Por padrÃ£o, mostrar clientes com mesas locadas OU com dÃ©bitos pendentes. Clientes inativos e sem dÃ©bitos sÃ³ aparecem via filtro.

2.1 -Tela "Cadastro do Cliente"

- **Campos Adicionais:** CPF, Identidade, EndereÃ§o detalhado, "Cliente Desde" (data da primeira locaÃ§Ã£o), Valor da Ficha, ComissÃ£o, NÃºmero do Contrato.
- **Regra de NegÃ³cio:**
  - O campo **"Valor do dÃ©bito" Ã© apenas para leitura**, atualizado somente via acertos.
  - A tela deve permitir a ediÃ§Ã£o de dados existentes do cliente.

2.2 Tela "Mesas DepÃ³sito" (Acessada ao "Adicionar Mesa")

- **FunÃ§Ã£o:** Tela para selecionar uma mesa do depÃ³sito para vincular a um cliente.
- **LÃ³gica:**
  - Exibe todas as mesas disponÃ­veis para locaÃ§Ã£o (apenas uma pode ser selecionada por vez).
  - Ao clicar em uma mesa, abrir um pop-up/dialog perguntando o tipo de acerto: "Fichas Jogadas" ou "Valor Fixo".
  - Se "Valor Fixo", um campo aparece para inserir o valor do aluguel mensal.
  - ApÃ³s vincular a mesa, retorna automaticamente para a tela anterior.
  - Se o usuÃ¡rio clicar em "Voltar" sem vincular mesa, retorna para a tela de clientes da rota.
  - Tela acessÃ­vel tambÃ©m pelo menu principal para gestÃ£o geral de mesas.
  - Seguir padrÃ£o visual Deep Space/Material Design.
  - Deve ter botÃ£o para cadastrar nova mesa, levando Ã  tela de Cadastro de Mesa.

2.3 Tela "Cadastro de Mesa"

- **FunÃ§Ã£o:** Permitir o cadastro de uma nova mesa no depÃ³sito.
- **Campos obrigatÃ³rios:**
  - NÃºmero da mesa
  - Tamanho
  - Tipo (Sinuca, Snooker, Pool, Bilhar)
  - Estado de conservaÃ§Ã£o
- **AÃ§Ãµes:** Salvar mesa no depÃ³sito e retornar para tela de depÃ³sito de mesas.

3- Tela "Detalhes do Cliente"

### Card 1: InformaÃ§Ãµes e AÃ§Ãµes RÃ¡pidas

- **ConteÃºdo:** NÃºmero de mesas locadas.
- **AÃ§Ãµes:** BotÃ£o para **WhatsApp** e Ã­cone de **Telefone** para ligar.

### Card 2: AÃ§Ãµes de Gerenciamento

- **BotÃµes:** "Novo Acerto", "Adicionar Mesa" (leva Ã  tela "Mesas DepÃ³sito"), "Retirar Mesa".
- **LÃ³gica para Retirar Mesa:**
  - Abre um pop-up/dialog solicitando o **relÃ³gio final** e o **valor recebido** no momento da retirada. A mesa retirada volta automaticamente para o depÃ³sito. NÃ£o permitir retirada se houver acerto em andamento para a mesa.

### Card 3: HistÃ³rico de Acertos

- **ConteÃºdo:** Lista de sub-cards, cada um representando um acerto passado. Clicar em um leva para "Detalhes do Acerto".
- **ObservaÃ§Ã£o do Cliente:** O campo de observaÃ§Ã£o Ã© puxado do Ãºltimo acerto, mas pode ser editado por administradores.

3.1- Tela "Detalhes do Acerto" (Nova Tela)

- **ConteÃºdo:** Exibe todas as informaÃ§Ãµes salvas de um acerto selecionado no histÃ³rico.

4-Tela "Acerto"

### Card 2 - Mesas

- **LÃ³gica "RelÃ³gio com Defeito":** Se o checkbox for marcado, o cÃ¡lculo do subtotal deve ser feito com base na mÃ©dia de fichas dos Ãºltimos acertos vÃ¡lidos.

### Card 3 - Totais

- **LÃ³gica MÃºltiplos Pagamentos:** Se mais de um mÃ©todo de pagamento for selecionado, **abrir um pop-up (dialog)** para o usuÃ¡rio discriminar o valor recebido em cada mÃ©todo.

### Card 4 - Diversos

- **Novos Campos:**
  - Checkbox "Pano trocado" (se marcado, mostrar campo para nÃºmero do pano).
  - Caixa de seleÃ§Ã£o "Tipo de acerto" ("Presencial" ou "por WhatsApp").
  - Campo "Representante" (preenchido automaticamente com o nome do usuÃ¡rio logado).
  - Campo "ObservaÃ§Ã£o".

5- Tela ImpressÃ£o

- **Fluxo:** Aparece apÃ³s salvar um acerto.
- **AÃ§Ãµes:** BotÃ£o para compartilhar recibo via WhatsApp ou imprimir em impressora tÃ©rmica 58mm.

6- Gerenciamento de Mesas

- **FunÃ§Ã£o:** Tela de alto nÃ­vel para gerenciar **todas as mesas da empresa**.
- **ConteÃºdo:** Cards com a quantidade de mesas em cada rota e a quantidade de mesas no depÃ³sito. Exibe o total de mesas da empresa.
- **LÃ³gica de MovimentaÃ§Ã£o:**
  - Todas as mesas criadas/editadas sÃ£o feitas no **depÃ³sito**.
  - Ao vincular a um cliente ("Adicionar Mesa"), a mesa sai do depÃ³sito e Ã© associada Ã  rota do cliente.
  - Ao retirar de um cliente ("Retirar Mesa"), a mesa retorna ao depÃ³sito.
- **AÃ§Ãµes (Admin):** BotÃ£o para "Adicionar Mesa" (ao depÃ³sito) e "Excluir Mesa" (do depÃ³sito).

6.1- Tela "Mesas Rota"

- **FunÃ§Ã£o:** Ao clicar em uma rota na tela "Gerenciamento de Mesas", exibe a lista de todas as mesas atualmente naquela rota.

7- Tela "Metas de Desempenho" (Nova Tela)

- **FunÃ§Ã£o:** Cadastrar e editar metas de desempenho.
- **Estrutura da Meta:**
  - **VÃ­nculo:** Associada a um ciclo de acerto e rota (Ex: "1Âº Acerto da Rota Zona Sul").
  - **Alvo:** Vinculada a um colaborador especÃ­fico (Ex: "JosÃ©").
  - **MÃ©tricas:**
    - Ex: % de clientes cobrados (meta: 50%).
    - Ex: Faturamento total (meta: > R$ 15.000).
    - Ex: Novas mesas locadas (meta: 6).
    - Ex: MÃ©dia de faturamento por mesa (meta: > R$ 100).
