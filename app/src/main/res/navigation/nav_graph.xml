<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/nav_graph"
    app:startDestination="@id/loginFragment">

    <fragment
        android:id="@+id/loginFragment"
        android:name="com.example.gestaobilhares.ui.auth.LoginFragment"
        android:label="LoginFragment">
        <action
            android:id="@+id/action_loginFragment_to_routesFragment"
            app:destination="@id/routesFragment"
            app:popUpTo="@id/loginFragment"
            app:popUpToInclusive="true" />
    </fragment>

    <fragment
        android:id="@+id/routesFragment"
        android:name="com.example.gestaobilhares.ui.routes.RoutesFragment"
        android:label="RoutesFragment">
        <action
            android:id="@+id/action_routesFragment_to_routeManagementFragment"
            app:destination="@id/routeManagementFragment" />
        <!-- FASE 3: Navegação para lista de clientes da rota -->
        <action
            android:id="@+id/action_routesFragment_to_clientListFragment"
            app:destination="@id/clientListFragment" />
        <!-- Navegação para histórico de despesas -->
        <action
            android:id="@+id/action_routesFragment_to_expenseHistoryFragment"
            app:destination="@id/expenseHistoryFragment" />
        <!-- Navegação para diagnóstico da impressora -->
        <action
            android:id="@+id/action_routesFragment_to_printerDiagnosticFragment"
            app:destination="@id/printerDiagnosticFragment" />
        <!-- ✅ FASE 9C: Navegação para histórico de ciclos -->
        <action
            android:id="@+id/action_routesFragment_to_cycleHistoryFragment"
            app:destination="@id/cycleHistoryFragment" />
    </fragment>

    <fragment
        android:id="@+id/routeManagementFragment"
        android:name="com.example.gestaobilhares.ui.routes.management.RouteManagementFragment"
        android:label="Gerenciar Rotas">
        <!-- Navegação de volta para rotas já está implícita com o botão voltar -->
    </fragment>

    <!-- Tela de histórico de despesas -->
    <fragment
        android:id="@+id/expenseHistoryFragment"
        android:name="com.example.gestaobilhares.ui.expenses.ExpenseHistoryFragment"
        android:label="Histórico de Despesas">
        <!-- Navegação de volta para rotas já está implícita com o botão voltar -->
    </fragment>

    <!-- Tela de diagnóstico da impressora -->
    <fragment
        android:id="@+id/printerDiagnosticFragment"
        android:name="com.example.gestaobilhares.ui.settlement.PrinterDiagnosticFragment"
        android:label="Diagnóstico da Impressora">
        <!-- Navegação de volta para rotas já está implícita com o botão voltar -->
    </fragment>

    <!-- FASE 3: Tela de lista de clientes da rota -->
    <fragment
        android:id="@+id/clientListFragment"
        android:name="com.example.gestaobilhares.ui.clients.ClientListFragment"
        android:label="Clientes da Rota">
        <argument
            android:name="rotaId"
            app:argType="long"
            android:defaultValue="0L" />
        <!-- FASE 4A: Navegação para detalhes do cliente -->
        <action
            android:id="@+id/action_clientListFragment_to_clientDetailFragment"
            app:destination="@id/clientDetailFragment" />
        <!-- FASE 4B: Navegação para cadastro de cliente -->
        <action
            android:id="@+id/action_clientListFragment_to_clientRegisterFragment"
            app:destination="@id/clientRegisterFragment" />
        <!-- ✅ NOVO: Navegação para histórico de ciclos -->
        <action
            android:id="@+id/action_clientListFragment_to_cycleHistoryFragment"
            app:destination="@id/cycleHistoryFragment" />
        <!-- ✅ NOVO: Navegação para cadastro de despesas -->
        <action
            android:id="@+id/action_clientListFragment_to_expenseRegisterFragment"
            app:destination="@id/expenseRegisterFragment" />
        <!-- ✅ NOVO: Navegação para gerenciamento de ciclos -->
        <action
            android:id="@+id/action_clientListFragment_to_cycleManagementFragment"
            app:destination="@id/cycleManagementFragment" />
    </fragment>

    <!-- FASE 4A: Tela de detalhes do cliente -->
    <fragment
        android:id="@+id/clientDetailFragment"
        android:name="com.example.gestaobilhares.ui.clients.ClientDetailFragment"
        android:label="Detalhes do Cliente">
        <argument
            android:name="clienteId"
            app:argType="long"
            android:defaultValue="0L" />
        <!-- ✅ NOVO: Controla se o diálogo de observações deve ser mostrado -->
        <argument
            android:name="mostrarDialogoObservacoes"
            app:argType="boolean"
            android:defaultValue="false" />
        <!-- FASE 4A: Navegação para novo acerto -->
        <action
            android:id="@+id/action_clientDetailFragment_to_settlementFragment"
            app:destination="@id/settlementFragment" />
        <!-- FASE 4B+: Navegação para detalhes do acerto -->
        <action
            android:id="@+id/action_clientDetailFragment_to_settlementDetailFragment"
            app:destination="@id/settlementDetailFragment" />
        <!-- Adicionar ações de navegação para Depósito de Mesas -->
        <action
            android:id="@+id/action_clientDetailFragment_to_mesasDepositoFragment"
            app:destination="@id/mesasDepositoFragment" />
        <!-- Navegação para editar cliente -->
        <action
            android:id="@+id/action_clientDetailFragment_to_clientRegisterFragment"
            app:destination="@id/clientRegisterFragment" />
        <!-- ✅ NOVA NAVEGAÇÃO: Para gerenciamento de ciclos -->
        <action
            android:id="@+id/action_clientDetailFragment_to_cycleManagementFragment"
            app:destination="@id/cycleManagementFragment" />
    </fragment>

    <!-- FASE 4A: Tela de registro de acerto -->
    <fragment
        android:id="@+id/settlementFragment"
        android:name="com.example.gestaobilhares.ui.settlement.SettlementFragment"
        android:label="Novo Acerto">
        <argument
            android:name="clienteId"
            app:argType="long"
            android:defaultValue="0L" />
        <!-- ✅ NOVO PARÂMETRO: Para modo de edição -->
        <argument
            android:name="acertoIdParaEdicao"
            app:argType="long"
            android:defaultValue="0L" />
        <!-- ✅ NOVO PARÂMETRO: Array de MesaDTO -->
        <argument
            android:name="mesasDTO"
            app:argType="com.example.gestaobilhares.ui.settlement.MesaDTO[]" />
    </fragment>

    <!-- FASE 4B: Tela de cadastro de cliente -->
    <fragment
        android:id="@+id/clientRegisterFragment"
        android:name="com.example.gestaobilhares.ui.clients.ClientRegisterFragment"
        android:label="Cadastrar Cliente">
        <argument
            android:name="rotaId"
            app:argType="long"
            android:defaultValue="0L" />
        <argument
            android:name="clienteId"
            app:argType="long"
            android:defaultValue="0L" />
        <action
            android:id="@+id/action_clientRegisterFragment_to_clientDetailFragment"
            app:destination="@id/clientDetailFragment" />
        <!-- Adicionar ações de navegação para Depósito de Mesas -->
        <action
            android:id="@+id/action_clientRegisterFragment_to_mesasDepositoFragment"
            app:destination="@id/mesasDepositoFragment" />
    </fragment>

    <!-- FASE 4B+: Tela de detalhes do acerto -->
    <fragment
        android:id="@+id/settlementDetailFragment"
        android:name="com.example.gestaobilhares.ui.settlement.SettlementDetailFragment"
        android:label="Detalhes do Acerto"
        tools:layout="@layout/fragment_settlement_detail">
        <argument
            android:name="acertoId"
            app:argType="long"
            android:defaultValue="0L" />
        <!-- ✅ NOVA NAVEGAÇÃO: Para edição de acerto -->
        <action
            android:id="@+id/action_settlementDetailFragment_to_settlementFragment"
            app:destination="@id/settlementFragment" />
    </fragment>

    <fragment
        android:id="@+id/logViewerFragment"
        android:name="com.example.gestaobilhares.ui.logs.LogViewerFragment"
        android:label="Visualizador de Logs"
        tools:layout="@layout/fragment_log_viewer" />

    <!-- Tela de Depósito de Mesas -->
    <fragment
        android:id="@+id/mesasDepositoFragment"
        android:name="com.example.gestaobilhares.ui.mesas.MesasDepositoFragment"
        android:label="Depósito de Mesas">
        <argument
            android:name="clienteId"
            app:argType="long"
            android:defaultValue="0L" />
        <action
            android:id="@+id/action_mesasDepositoFragment_to_cadastroMesaFragment"
            app:destination="@id/cadastroMesaFragment" />
        <!-- ✅ NOVA AÇÃO: Navegação para detalhes do cliente após vincular mesa -->
        <action
            android:id="@+id/action_mesasDepositoFragment_to_clientDetailFragment"
            app:destination="@id/clientDetailFragment" />
    </fragment>

    <!-- Tela de Cadastro de Mesa -->
    <fragment
        android:id="@+id/cadastroMesaFragment"
        android:name="com.example.gestaobilhares.ui.mesas.CadastroMesaFragment"
        android:label="Cadastro de Mesa" />

    <!-- ✅ FASE 9C: Tela de histórico de ciclos -->
    <fragment
        android:id="@+id/cycleHistoryFragment"
        android:name="com.example.gestaobilhares.ui.clients.CycleHistoryFragment"
        android:label="Histórico de Ciclos">
        <argument
            android:name="rotaId"
            app:argType="long"
            android:defaultValue="0L" />
        <!-- ✅ NOVO: Navegação para gerenciamento de ciclos -->
        <action
            android:id="@+id/action_cycleHistoryFragment_to_cycleManagementFragment"
            app:destination="@id/cycleManagementFragment" />
    </fragment>

    <!-- ✅ NOVO: Tela de gerenciamento de ciclos -->
    <fragment
        android:id="@+id/cycleManagementFragment"
        android:name="com.example.gestaobilhares.ui.cycles.CycleManagementFragment"
        android:label="Gerenciar Ciclo">
        <argument
            android:name="cicloId"
            app:argType="long"
            android:defaultValue="0L" />
        <argument
            android:name="rotaId"
            app:argType="long"
            android:defaultValue="0L" />
        <!-- ✅ NOVO: Navegação para cadastro de despesas -->
        <action
            android:id="@+id/action_cycleManagementFragment_to_expenseRegisterFragment"
            app:destination="@id/expenseRegisterFragment" />
    </fragment>

    <!-- ✅ NOVO: Tela de cadastro de despesas -->
    <fragment
        android:id="@+id/expenseRegisterFragment"
        android:name="com.example.gestaobilhares.ui.expenses.ExpenseRegisterFragment"
        android:label="Nova Despesa">
        <argument
            android:name="rotaId"
            app:argType="long"
            android:defaultValue="0L" />
        <!-- ✅ NOVO: Argumentos para edição de despesa -->
        <argument
            android:name="despesaId"
            app:argType="long"
            android:defaultValue="0L" />
        <argument
            android:name="modoEdicao"
            app:argType="boolean"
            android:defaultValue="false" />
    </fragment>

    <!-- Tela de Relatórios -->
    <fragment
        android:id="@+id/reportsFragment"
        android:name="com.example.gestaobilhares.ui.reports.ReportsFragment"
        android:label="Relatórios" />

    <!-- MainFragment mantido para compatibilidade, será removido futuramente -->
    <fragment
        android:id="@+id/mainFragment"
        android:name="com.example.gestaobilhares.ui.main.MainFragment"
        android:label="MainFragment" />

</navigation> 