---
description:
globs:
alwaysApply: false
---
# ğŸ§ª POLÃTICA DE TESTES E VALIDAÃ‡ÃƒO - GestaoBilhares

## ğŸ“‹ **PROTOCOLO OBRIGATÃ“RIO PARA CADA EVOLUÃ‡ÃƒO**

### âš¡ **QUANDO APLICAR**
- âœ… ApÃ³s implementaÃ§Ã£o de nova tela/fragment
- âœ… ApÃ³s mudanÃ§as significativas em ViewModels
- âœ… ApÃ³s alteraÃ§Ãµes em navigation
- âœ… ApÃ³s modificaÃ§Ãµes em dependÃªncias (Hilt/Room/Firebase)
- âœ… Antes de finalizar qualquer fase do projeto
- âœ… ApÃ³s correÃ§Ãµes de bugs crÃ­ticos

### ğŸ’¾ **BACKUP OBRIGATÃ“RIO**
- ğŸ”„ **ANTES** de cada teste: `.\backup-rapido.ps1 -mensagem "Antes teste [Feature]"`
- ğŸ”„ **APÃ“S** teste bem-sucedido: `.\backup-rapido.ps1 -mensagem "Teste OK - [Feature] funcional"`
- ğŸ”„ **PolÃ­tica:** Ver `.cursor/rules/politica-backup-commits.mdc`

### ğŸ” **CHECKLIST DE VALIDAÃ‡ÃƒO OBRIGATÃ“RIO**

#### **0. ANÃLISE DE SIMPLIFICAÃ‡ÃƒO (OPCIONAL)**
```bash
# Verificar se hÃ¡ cÃ³digo complexo para simplificar
# CritÃ©rios: +50 linhas/mÃ©todo, +300 linhas/classe, duplicaÃ§Ã£o
# PolÃ­tica: .cursor/rules/politica-simplificacao-codigo.mdc
```

#### **1. TESTE DE BUILD (CRÃTICO)**
```bash
# Limpeza completa
./gradlew clean

# Build de debug
./gradlew assembleDebug

# Verificar se gerou APK sem erros
ls -la app/build/outputs/apk/debug/
```

#### **2. TESTE DE INSTALAÃ‡ÃƒO**
```bash
# Instalar no dispositivo/emulador
./gradlew installDebug

# Verificar se instalou corretamente
adb shell pm list packages | findstr gestaobilhares
```

#### **3. ANÃLISE DE LOGS (CRÃTICA)**
```bash
# Limpar logs anteriores
adb logcat -c

# Executar app e capturar logs crÃ­ticos
adb logcat | findstr /i "FATAL\|ERROR\|gestaobilhares\|hilt\|dagger"

# Logs especÃ­ficos para crashes
adb logcat -s AndroidRuntime:E

# Logs de fragmentos (navegaÃ§Ã£o)
adb logcat -s FragmentManager:D
```

#### **4. VALIDAÃ‡ÃƒO DE FUNCIONALIDADES**
- âœ… Login funciona
- âœ… NavegaÃ§Ã£o entre telas nÃ£o trava
- âœ… Dados mock sÃ£o exibidos corretamente
- âœ… BotÃµes respondem adequadamente
- âœ… NÃ£o hÃ¡ crashes ao navegar
- âœ… Hilt injeta dependÃªncias sem erro

### ğŸš¨ **CRITÃ‰RIOS DE BLOQUEIO**

#### **ERROS QUE IMPEDEM PROSSEGUIR:**
- âŒ Build falha
- âŒ App nÃ£o instala
- âŒ Crash na inicializaÃ§Ã£o
- âŒ Erro de Hilt/Dagger
- âŒ Navigation nÃ£o funciona
- âŒ FATAL ou ERROR crÃ­ticos no logcat

#### **WARNINGS ACEITÃVEIS:**
- âš ï¸ Warnings de lint menores
- âš ï¸ Deprecations nÃ£o crÃ­ticas
- âš ï¸ Logs informativos (DEBUG/INFO)

### ğŸ“ **DOCUMENTAÃ‡ÃƒO OBRIGATÃ“RIA**

#### **REGISTRO DE CADA TESTE:**
```markdown
## TESTE - [Data] - [Fase/Feature]
- **Build:** âœ…/âŒ
- **InstalaÃ§Ã£o:** âœ…/âŒ  
- **Funcionalidade:** âœ…/âŒ
- **Logs:** âœ… Limpos / âŒ Erros encontrados
- **Notas:** [ObservaÃ§Ãµes especÃ­ficas]
```

### ğŸ› ï¸ **COMANDOS RÃPIDOS PARA TESTES**

#### **Teste Completo (PowerShell):**
```powershell
# Script de teste completo
Write-Host "ğŸ§ª Iniciando teste completo..." -ForegroundColor Green

# 1. Limpeza
./gradlew clean
if ($LASTEXITCODE -ne 0) { Write-Host "âŒ Falha na limpeza"; exit }

# 2. Build
./gradlew assembleDebug
if ($LASTEXITCODE -ne 0) { Write-Host "âŒ Falha no build"; exit }

# 3. InstalaÃ§Ã£o
./gradlew installDebug
if ($LASTEXITCODE -ne 0) { Write-Host "âŒ Falha na instalaÃ§Ã£o"; exit }

# 4. Verificar logs
Write-Host "ğŸ“± App instalado! Teste manualmente e verifique logs..." -ForegroundColor Yellow
C:\Users\Rossiny\AppData\Local\Android\Sdk\platform-tools\adb.exe logcat -c
```

### ğŸ”„ **PROCESSO DE RECUPERAÃ‡ÃƒO**

#### **SE BUILD FALHAR:**
1. Verificar imports e dependÃªncias
2. Clean + rebuild
3. Invalidate caches (Android Studio)
4. Verificar conflitos de versÃ£o

#### **SE APP CRASHAR:**
1. Capturar stack trace completo
2. Identificar classe/mÃ©todo do crash
3. Verificar inicializaÃ§Ã£o do Hilt
4. Confirmar annotations (@AndroidEntryPoint)

#### **SE NAVEGAÃ‡ÃƒO FALHAR:**
1. Verificar nav_graph.xml
2. Confirmar arguments/actions
3. Testar fragments individualmente
4. Verificar Safe Args

### ğŸ“Š **MÃ‰TRICAS DE QUALIDADE**

#### **METAS POR FASE:**
- **Fase 4A:** 0 crashes, navegaÃ§Ã£o 100% funcional
- **Fase 4B:** FormulÃ¡rios validam corretamente
- **Fase 5:** Performance adequada, sem memory leaks
- **Fase 6:** SincronizaÃ§Ã£o estÃ¡vel
- **Fase 7:** App production-ready

### ğŸ¯ **RESPONSABILIDADES**

#### **ANTES DE CADA COMMIT:**
- [ ] Build limpo
- [ ] Testes bÃ¡sicos executados
- [ ] Logs verificados

#### **ANTES DE CADA PUSH:**
- [ ] Funcionalidade completa testada
- [ ] RegressÃ£o verificada
- [ ] Performance aceitÃ¡vel

#### **ANTES DE CADA RELEASE:**
- [ ] Teste completo em mÃºltiplos dispositivos
- [ ] ValidaÃ§Ã£o de todos os fluxos
- [ ] Logs de produÃ§Ã£o limpos

---

## ğŸš€ **IMPLEMENTAÃ‡ÃƒO IMEDIATA**

Esta polÃ­tica entra em vigor **AGORA** e serÃ¡ aplicada antes de:
- Finalizar Fase 4A (ClientDetail + Settlement)
- Iniciar Fase 4B (Cadastros bÃ¡sicos)
- Qualquer push significativo

**PrÃ³ximo teste serÃ¡ executado apÃ³s finalizar implementaÃ§Ã£o atual da Fase 4A.**
