# üõ†Ô∏è WINDSURF COMMANDS - COMANDOS ESSENCIAIS OTIMIZADOS

> Comandos essenciais do projeto configurados para WindSurf  
> Build otimizado com cache | ADB customizado | Logs estruturados  
> Baseado em PROJECT_README.md e DEV_GUIDE.md

---

## üéØ OBJETIVO

Configurar WindSurf com comandos **otimizados e padronizados** para:
- Build r√°pido (com cache e paralelismo)
- ADB customizado (path espec√≠fico do projeto)
- Logs estruturados (com tags padr√£o)
- Busca eficiente no c√≥digo
- Deploy automatizado

---

## üöÄ COMANDOS DE BUILD

### Build Debug (Principal)

```bash
# WindSurf: Comando principal de build
/wind build

# Execu√ß√£o:
.\gradlew.bat :app:assembleDebug --build-cache --parallel

# Meta: < 5 minutos com cache
# Sa√≠da: app/build/outputs/apk/debug/app-debug.apk
```

### Build Release

```bash
# WindSurf: Build de produ√ß√£o
/wind build_release

# Execu√ß√£o:
.\gradlew.bat :app:assembleRelease

# Meta: APK otimizado e assinado
# Sa√≠da: app/build/outputs/apk/release/app-release.apk
```

### Build Otimizado

```bash
# WindSurf: Build ultra-r√°pido
/wind build_fast

# Execu√ß√£o:
.\gradlew.bat :app:assembleDebug --build-cache --parallel -x lint

# Otimiza√ß√µes:
# - Cache ativo
# - Paralelismo m√°ximo
# - Pula lint (economiza tempo)
```

### Build por M√≥dulo

```bash
# WindSurf: Build espec√≠fico por m√≥dulo
/wind build_module [nome]

# Exemplos:
/wind build_module data     # Apenas m√≥dulo data
/wind build_module ui       # Apenas m√≥dulo ui
/wind build_module sync     # Apenas m√≥dulo sync

# Execu√ß√£o:
.\gradlew.bat :[MODULE]:assembleDebug
```

---

## üß™ COMANDOS DE TESTES

### Testes Unit√°rios

```bash
# WindSurf: Executar testes unit√°rios
/wind test

# Execu√ß√£o:
.\gradlew.bat testDebugUnitTest

# Meta: < 2 minutos
# Cobertura atual: 5-7%
```

### Testes de Integra√ß√£o

```bash
# WindSurf: Testes instrumentados
/wind test_integration

# Execu√ß√£o:
.\gradlew.bat connectedDebugAndroidTest

# Requer: Emulador ou dispositivo conectado
```

### Testes Espec√≠ficos

```bash
# WindSurf: Teste por classe
/wind test_class [nome]

# Exemplo:
/wind test_class SettlementViewModelTest

# Execu√ß√£o:
.\gradlew.bat testDebugUnitTest --tests "*.[ClassName]"
```

### Cobertura de C√≥digo

```bash
# WindSurf: Gerar relat√≥rio de cobertura
/wind coverage

# Execu√ß√£o:
.\gradlew.bat jacocoTestReport

# Sa√≠da: app/build/reports/jacoco/jacocoTestReport/html/index.html
```

---

## üì± ADB CUSTOMIZADO

### Path Obrigat√≥rio

```bash
# WindSurf: Configurar ADB customizado
/wind adb_setup

# Path do projeto (N√ÉO o padr√£o):
set ADB_PATH=C:\Users\Rossiny\Desktop\2-GestaoBilhares\android-sdk\platform-tools\adb.exe

# Importante: IAs sempre usam este path
```

### Logs Estruturados

```bash
# WindSurf: Logs por tag espec√≠fica
/wind logs [tag]

# Exemplos:
/wind logs diagnostico    # [DIAGNOSTICO]:D
/wind logs sync          # [SYNC]:D
/wind logs conflict      # [CONFLICT]:D
/wind logs all           # Todas as tags + erros

# Execu√ß√£o:
%ADB_PATH% logcat -s [DIAGNOSTICO]:D -v time
%ADB_PATH% logcat -s [DIAGNOSTICO]:D [SYNC]:D [CONFLICT]:D *:E
```

### Logs em Arquivo

```bash
# WindSurf: Salvar logs em arquivo
/wind logs_save [nome]

# Execu√ß√£o:
%ADB_PATH% logcat > logs-[timestamp].txt

# Sa√≠da: logs-20260128-101500.txt
```

### Logs por Componente

```bash
# WindSurf: Logs de componentes espec√≠ficos
/wind logs_component [componente]

# Exemplos:
/wind logs_component firestore
/wind logs_component auth
/wind logs_component workmanager

# Execu√ß√£o:
%ADB_PATH% logcat -s FirebaseFirestore:D FirebaseAuth:D WM-WorkerWrapper:D
```

---

## üîç COMANDOS DE BUSCA

### Busca de Componentes

```bash
# WindSurf: Encontrar componentes rapidamente
/wind find [componente]

# Exemplos:
/wind find SettlementViewModel
/wind find ClienteDao
/wind find SyncRepository

# Execu√ß√£o:
rg "[ComponentName]" --type kt -n
```

### Busca por Padr√£o

```bash
# WindSurf: Buscar padr√µes no c√≥digo
/wind pattern [padrao]

# Exemplos:
/wind pattern usuarioId
/wind pattern groupBy
/wind pattern rota_id

# Execu√ß√£o:
rg "[pattern]" --type kt -C 5
```

### Arqueologia (Regress√£o)

```bash
# WindSurf: Investigar regress√µes
/wind archaeology [termo]

# Execu√ß√£o:
rg "[termo]" --type kt -C 3
git blame <arquivo> -L 450,470
git log --follow -p -- <arquivo>
```

### Busca Multi-padr√£o

```bash
# WindSurf: Buscar m√∫ltiplos padr√µes
/wind multi_find [padrao1] [padrao2] [padrao3]

# Execu√ß√£o paralela:
rg "padrao1" --type kt -n &
rg "padrao2" --type kt -n &
rg "padrao3" --type kt -n &
```

---

## üöÄ COMANDOS DE DEPLOY

### Firebase App Distribution

```bash
# WindSurf: Deploy para testadores
/wind deploy [notas]

# Execu√ß√£o:
.\gradlew.bat :app:assembleDebug
firebase appdistribution:distribute app/build/outputs/apk/debug/app-debug.apk \
  --app 1:XXXXX:android:XXXXX \
  --groups testers \
  --release-notes "[notas]"

# Requer: secrets/google-services.json
```

### Deploy de Security Rules

```bash
# WindSurf: Atualizar regras do Firestore
/wind deploy_rules

# Execu√ß√£o:
node import-data/deploy-security-rules-v2.js

# Alternativa (PowerShell):
.\scripts\deploy-regras-firestore.ps1
```

### Backup Autom√°tico

```bash
# WindSurf: Backup do Firestore
/wind backup

# Execu√ß√£o:
firebase firestore:export --project=gestao-bilhares-prod \
  gs://gestao-bilhares-backups/backup-$(date +%Y%m%d)
```

---

## üßπ COMANDOS DE MANUTEN√á√ÉO

### Limpeza de Build

```bash
# WindSurf: Limpar build e cache
/wind clean

# Execu√ß√£o:
.\gradlew.bat clean

# Remove: build/, .gradle/, caches
```

### Otimiza√ß√£o de Cache

```bash
# WindSurf: Otimizar cache Gradle
/wind optimize_cache

# Execu√ß√£o:
.\gradlew.bat :app:assembleDebug --build-cache --parallel --refresh-keys

# Resultado: Builds mais r√°pidos
```

### Verifica√ß√£o de Depend√™ncias

```bash
# WindSurf: Verificar depend√™ncias
/wind deps_check

# Execu√ß√£o:
.\gradlew.bat dependencies
.\gradlew.bat dependencyUpdates

# Identifica: depend√™ncias desatualizadas
```

### An√°lise de C√≥digo

```bash
# WindSurf: An√°lise est√°tica de c√≥digo
/wind analyze

# Execu√ß√£o:
.\gradlew.bat lint
.\gradlew.bat detekt

# Sa√≠da: relat√≥rios de qualidade
```

---

## üìä COMANDOS DE MONITORAMENTO

### Status do Projeto

```bash
# WindSurf: Status geral do projeto
/wind status

# Verifica:
# - Build status
# - Test coverage
# - Sync operations
# - Performance metrics
```

### Monitoramento de Sync

```bash
# WindSurf: Status da sincroniza√ß√£o
/wind sync_status

# Execu√ß√£o:
# Verificar fila de sync operations
# Logs do WorkManager
# Performance de sync
```

### Health Check

```bash
# WindSurf: Verifica√ß√£o completa de sa√∫de
/wind health_check

# Checks:
# - Build funcional
# - Testes passando
# - Multi-tenancy OK
# - Offline-first OK
# - Logs estruturados
# - ADB customizado
```

---

## üîß COMANDOS DE DESENVOLVIMENTO

### Criar Componente

```bash
# WindSurf: Criar novo componente seguindo padr√µes
/wind create [tipo] [nome]

# Exemplos:
/wind create entity Cliente
/wind create dao Cliente
/wind create repository Cliente
/wind create viewmodel Cliente
/wind create fragment Cliente
```

### Valida√ß√£o de Arquitetura

```bash
# WindSurf: Validar arquitetura MVVM
/wind validate_arch

# Verifica:
# - @HiltViewModel em ViewModels
# - StateFlow ao inv√©s de LiveData
# - Inje√ß√£o de depend√™ncias
# - Multi-tenancy (rota_id)
```

### Formata√ß√£o de C√≥digo

```bash
# WindSurf: Formatar c√≥digo segundo padr√µes
/wind format

# Execu√ß√£o:
.\gradlew.bat ktlintFormat

# Aplica: padr√µes Kotlin + projeto
```

---

## üéÆ SNIPPETS AUTOM√ÅTICOS

### ViewModel Pattern

```bash
# WindSurf: Gerar ViewModel completo
/wind snippet viewmodel [Nome]

# Gera:
@HiltViewModel
class [Nome]ViewModel @Inject constructor(
    private val repository: [Nome]Repository
) : ViewModel() {
    
    private val _uiState = MutableStateFlow([Nome]UiState.Initial)
    val uiState: StateFlow<[Nome]UiState> = _uiState.asStateFlow()
}
```

### DAO Pattern

```bash
# WindSurf: Gerar DAO completo
/wind snippet dao [Nome]

# Gera:
@Dao
interface [Nome]Dao {
    @Query("SELECT * FROM [nome] WHERE rota_id = :rotaId")
    fun getByRota(rotaId: String): Flow<List<[Nome]>>
    
    @Insert(onConflict = OnConflictStrategy.REPLACE)
    suspend fun insert(entity: [Nome]): Long
    
    @Query("SELECT * FROM [nome] WHERE id = :id")
    suspend fun getById(id: String): [Nome]?
}
```

### Entity Pattern

```bash
# WindSurf: Gerar Entity com multi-tenancy
/wind snippet entity [Nome]

# Gera:
@Entity(tableName = "[nome]")
data class [Nome]Entity(
    @PrimaryKey val id: String,
    val empresa_id: String,
    val rota_id: String,
    val dataUltimaAtualizacao: Long = System.currentTimeMillis(),
    // ... outros campos
)
```

---

## üìã ALIAS E ATALHOS

### Atalhos R√°pidos

```bash
# WindSurf: Atalhos para comandos frequentes
/wind b          # build
/wind br         # build_release
/wind t          # test
/wind l          # logs
/wind f          # find
/wind d          # deploy
/wind c          # clean
/wind s          # status
```

### Comandos de Ajuda

```bash
# WindSurf: Ajuda integrada
/wind help              # Lista todos comandos
/wind help [comando]    # Ajuda espec√≠fica
/wind examples          # Exemplos de uso
/wind docs              # Documenta√ß√£o completa
```

---

## üîó INTEGRA√á√ÉO COM WORKFLOWS

### Comandos nos Workflows

```yaml
# WindSurf: Integra√ß√£o com workflows
workflow_integration:
  bug_fix_workflow:
    - /wind status
    - /wind find [componente]
    - /wind build
    - /wind test
    - /wind validate_arch
    
  feature_workflow:
    - /wind create entity [Nome]
    - /wind create dao [Nome]
    - /wind create repository [Nome]
    - /wind create viewmodel [Nome]
    - /wind build_fast
    - /wind test
    - /wind deploy
```

### Valida√ß√µes Autom√°ticas

```yaml
# WindSurf: Valida√ß√µes autom√°ticas
automatic_validations:
  on_build:
    - Verificar .bat no comando
    - Validar cache ativo
    - Checar multi-tenancy
    
  on_test:
    - Verificar cobertura
    - Validar mocks
    - Checar assertions
    
  on_deploy:
    - Verificar secrets
    - Validar assinatura
    - Checar permiss√µes
```

---

## üìà M√âTRICAS E PERFORMANCE

### Tempo de Execu√ß√£o

```yaml
# WindSurf: M√©tricas de performance
command_performance:
  build_debug:
    target: "< 5 minutos"
    with_cache: "~2 minutos"
    
  test_unit:
    target: "< 2 minutos"
    current: "~1 minuto"
    
  deploy_app:
    target: "< 10 minutos"
    includes: "build + upload"
```

### Taxa de Sucesso

```yaml
# WindSurf: Taxa de sucesso dos comandos
success_rates:
  build: "95%"
  test: "90%"
  deploy: "85%"
  sync: "95%"
```

---

## üéØ BENEF√çCIOS

### Para IAs
- **Comandos padronizados:** Sem varia√ß√£o
- **Execu√ß√£o r√°pida:** Cache e paralelismo
- **Logs estruturados:** Diagn√≥stico f√°cil
- **Zero configura√ß√£o:** Tudo pronto

### Para Humanos
- **Produtividade:** Comandos r√°pidos
- **Consist√™ncia:** Padr√µes mantidos
- **Visibilidade:** M√©tricas claras
- **Automa√ß√£o:** Menos trabalho manual

### Para Projeto
- **Qualidade:** Valida√ß√µes autom√°ticas
- **Performance:** Builds otimizados
- **Monitoramento:** Sa√∫de vis√≠vel
- **Evolu√ß√£o:** Base s√≥lida

---

*Comandos otimizados para m√°xima efici√™ncia no WindSurf.*
